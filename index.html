<!doctype html>
<html lang="es" dir="ltr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MoonWord (MoWo) ‚Äî Token oficial</title>
<meta name="description" content="MoonWord (MoWo) ‚Äî token ERC-20 en Polygon. Staking flexible y bloqueado, pool de juego, supply fijo 1 bill√≥n (1,000,000,000,000). √ösalo en nuestro pr√≥ximo juego Android.">
<meta property="og:title" content="MoonWord (MoWo) ‚Äî Token oficial">
<meta property="og:description" content="Token en Polygon con staking flexible y bloqueado. Transparencia total.">
<meta property="og:type" content="website">
<meta name="theme-color" content="#0b0f1a">
<style>
  :root{
    --bg:#080b16; --bg2:#0d1326; --card:#111733; --muted:#9aa3b2; --text:#e8ecf7;
    --neon1:#7dd3fc; --neon2:#a78bfa; --neon3:#22d3ee; --accent:#00ffa3;
    --shadow: 0 24px 60px rgba(0,0,0,.45);
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
    background:
      radial-gradient(1200px 600px at 85% -10%, rgba(124,58,237,.18) 0%, transparent 60%),
      radial-gradient(1000px 500px at 10% 110%, rgba(56,189,248,.14) 0%, transparent 60%),
      linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
  }
  a{color:inherit;text-decoration:none}
  .wrap{max-width:1100px;margin:0 auto;padding:26px}
  header{display:flex;align-items:center;gap:16px;margin-bottom:10px}
  .logo{width:52px;height:52px;filter:drop-shadow(0 8px 18px rgba(0,0,0,.45))}
  .brand h1{margin:0;font-size:22px;letter-spacing:.3px}
  .brand small{display:block;color:var(--muted)}
  .lang{margin-left:auto}
  select{background:#0f162f;color:#cfe9ff;border:1px solid rgba(255,255,255,.15);border-radius:10px;padding:8px}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.08);
    border-radius:var(--radius); box-shadow:var(--shadow)
  }
  .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center}
  .hero .left{padding:26px;position:relative;overflow:hidden}
  .glow{
    position:absolute; inset:-2px; pointer-events:none; border-radius:inherit;
    background: conic-gradient(from 0deg, transparent, rgba(125,211,252,.25), rgba(167,139,250,.25), transparent 60%);
    filter:blur(24px); opacity:.55; mask:linear-gradient(#000 40%,transparent 60%);
  }
  h2.title{font-size:34px;margin:0 0 6px}
  .subtitle{color:var(--muted);margin:0 0 16px}
  .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
  .btn{padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:#141c3a;display:inline-flex;gap:8px;align-items:center;cursor:pointer}
  .btn.primary{background:linear-gradient(135deg, var(--neon1), var(--neon2)); color:#071023; font-weight:800; border:none; box-shadow:0 10px 28px rgba(125,211,252,.25)}
  .metric{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:18px}
  .kpi{padding:14px}
  .kpi h3{margin:0 0 6px;font-size:13px;color:var(--muted);font-weight:700;letter-spacing:.2px}
  .kpi p{margin:0;font-size:18px;font-weight:800}
  .right{padding:22px;text-align:center}
  .pill{display:inline-block;background:#0f1630;border:1px solid rgba(255,255,255,.12);padding:10px 12px;border-radius:12px;margin:6px 4px}
  .panel{margin:28px 0;display:grid;grid-template-columns:1fr 1fr;gap:20px}
  .box{padding:20px}
  .note{font-size:12px;color:var(--muted)}
  .warn{color:#fbbf24;font-weight:700}
  details{background:#0f1630;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:12px}
  details > summary{cursor:pointer;font-weight:700;margin:6px 0}
  pre{white-space:pre-wrap; word-break:break-word; font-size:12px; line-height:1.35; background:#0b1229;border:1px solid rgba(255,255,255,.08); padding:14px;border-radius:10px; max-height:480px; overflow:auto}
  .buyPanel{display:grid;grid-template-columns:1fr 1fr;gap:14px}
  .ribbon{
    background:linear-gradient(90deg, rgba(0,255,163,.12), rgba(125,211,252,.12));
    border:1px dashed rgba(0,255,163,.45); color:#afffdf;
    padding:10px 12px; border-radius:12px; font-weight:700; text-align:center; margin:10px 0;
  }
  @media(max-width:980px){ .hero{grid-template-columns:1fr} .panel{grid-template-columns:1fr} .metric{grid-template-columns:1fr} .buyPanel{grid-template-columns:1fr} }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <!-- LOGO -->
    <svg class="logo" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" aria-label="MoWo">
      <defs>
        <radialGradient id="g1" cx="50%" cy="50%" r="60%"><stop offset="0%" stop-color="#7dd3fc"/><stop offset="100%" stop-color="#1f2a52"/></radialGradient>
        <linearGradient id="g2" x1="0" x2="1"><stop offset="0%" stop-color="#a78bfa"/><stop offset="100%" stop-color="#7dd3fc"/></linearGradient>
      </defs>
      <circle cx="64" cy="64" r="62" fill="url(#g1)" stroke="#101631" stroke-width="4"/>
      <path d="M64 20c14 12 18 25 18 34 0 16-12 30-18 34-6-4-18-18-18-34 0-9 4-22 18-34z" fill="url(#g2)"/>
      <circle cx="45" cy="82" r="6" fill="#0b0f1a"/><circle cx="83" cy="82" r="6" fill="#0b0f1a"/>
      <path d="M24 98c26 18 54 18 80 0" stroke="#0b0f1a" stroke-width="6" fill="none" stroke-linecap="round"/>
      <path d="M84 36l14-4-4 14-10-10z" fill="#fff" opacity=".9"/>
      <path d="M92 28l12-6-6 12-6-6z" fill="#fff" opacity=".7"/>
    </svg>
    <div class="brand">
      <h1>MoonWord <span class="sym">($MoWo)</span></h1>
      <small data-i="header_sub">Token ERC-20 en Polygon ‚Ä¢ Staking flexible y bloqueado</small>
    </div>
    <div class="lang">
      <select id="langSel" aria-label="language">
        <option value="es">ES</option><option value="en">EN</option>
        <option value="ru">RU</option><option value="ar">AR</option>
        <option value="de">DE</option><option value="fr">FR</option>
        <option value="it">IT</option><option value="zh">‰∏≠Êñá</option>
      </select>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero card">
    <div class="left">
      <div class="glow"></div>
      <h2 class="title" data-i="hero_title">Este token lo podr√°s utilizar en la Luna üåô</h2>
      <p class="subtitle" data-i="hero_desc">
        Supply fijo de 1,000,000,000,000 MoWo. Sin mint futuro. Pools internos para <b>juego (30M)</b> y <b>staking (500M)</b>.
      </p>

      <div class="cta">
        <a class="btn primary" target="_blank" href="https://polygonscan.com/address/0xA6aa1812156fD392fE8B2cf4dBb95BB229990ab7" data-i="btn_scan">Ver en Polygonscan</a>
        <a class="btn" target="_blank" id="uniLink" href="https://app.uniswap.org/swap?chain=polygon&outputCurrency=0xA6aa1812156fD392fE8B2cf4dBb95BB229990ab7" data-i="btn_uniswap">Comprar en Uniswap</a>
        <button class="btn" id="addMetaMask" data-i="btn_add">A√±adir a MetaMask</button>
        <button class="btn" id="connectWallet">üîå <span data-i="btn_connect">Conectar wallet</span></button>
      </div>

      <div class="ribbon" data-i="ribbon">Oferta limitada de preventa ‚Äî precio preferente hasta que termine el contador.</div>

      <p class="subtitle" data-i="presale_until">Preventa termina en: <strong id="countdown">--d --:--:--</strong></p>
      <p class="note" id="walletInfo"></p>

      <div class="metric">
        <div class="kpi card"><h3 data-i="k_supply">Suministro</h3><p>1,000,000,000,000 MoWo</p></div>
        <div class="kpi card"><h3 data-i="k_chain">Red</h3><p>Polygon (POL)</p></div>
        <div class="kpi card"><h3 data-i="k_addr">Contrato</h3><p style="font-size:12px;line-height:1.2;word-break:break-all">0xA6aa1812156fD392fE8B2cf4dBb95BB229990ab7</p></div>
      </div>
    </div>

    <div class="right">
      <h3 data-i="ref_price">Precio de referencia inicial</h3>
      <p class="subtitle">1 POL = <b>100,000 MoWo</b></p>
      <div class="pill">Par: POL / MoWo</div><div class="pill">Fee 0.3%</div>
      <p class="note" data-i="amm_note">El precio real lo decide el AMM seg√∫n liquidez y operaciones.</p>

      <div class="buyPanel" style="margin-top:12px">
        <a class="btn primary" id="buyCrypto" target="_blank" href="https://app.uniswap.org/#/swap?chain=polygon&outputCurrency=0xA6aa1812156fD392fE8B2cf4dBb95BB229990ab7">üí± <span data-i="buy_crypto">Comprar con CRIPTO</span></a>
        <button class="btn" id="buyCard">üí≥ <span data-i="buy_card">Comprar con TARJETA</span></button>
      </div>
      <p class="note" style="margin-top:10px" data-i="need_pol">Necesitas POL para gas (Polygon).</p>
    </div>
  </section>

  <!-- TOKENOMICS / STAKING -->
  <section class="panel">
    <div class="card box">
      <h2 data-i="tok_title">Tokenomics</h2>
      <div class="pill"><b data-i="tok_total">Supply total</b>: 1,000,000,000,000</div>
      <div class="pill"><b data-i="tok_game">Pool juego</b>: 30,000,000 (en contrato)</div>
      <div class="pill"><b data-i="tok_stake">Pool staking</b>: 500,000,000 (en contrato)</div>
      <ul class="note" style="margin-top:12px">
        <li data-i="tok_nomint">Sin airdrop autom√°tico, sin mint posterior.</li>
        <li data-i="tok_roles">Roles seguros para recompensas de juego y ajustes de APR.</li>
        <li data-i="tok_modes">Staking flexible (salida libre) y bloqueado (30/90/180 d√≠as).</li>
      </ul>
      <p class="note" style="margin-top:10px"><b>üì± Game Pool:</b> <span data-i="game_note">El total asignado al Game Pool se activar√° con el lanzamiento del nuevo juego Android ‚Äî experiencia in√©dita, sin env√≠os por ‚ÄúPlay‚Äù, 100% integrable con MoWo.</span></p>
    </div>

    <div class="card box">
      <h2 data-i="stake_title">Explicaci√≥n de staking</h2>
      <p class="note" data-i="stake_flex">El contrato tiene <b>staking flexible</b> sin obligaci√≥n de bloquear. Puedes entrar/salir cuando quieras y reclamar recompensas acumuladas (<code>claimFlexible()</code>).</p>
      <ul class="note">
        <li>APR por defecto: <b>Flexible 8%</b> ‚Äî <b>30d 12%</b> ‚Äî <b>90d 20%</b> ‚Äî <b>180d 30%</b>.</li>
      </ul>
      <h3 style="margin:10px 0" data-i="stake_examples">Ejemplos con 1000 MoWo</h3>
      <div class="pill">Flexible 30d ‚âà <b>6.58</b> ‚Ä¢ 90d ‚âà <b>19.73</b> ‚Ä¢ 180d ‚âà <b>39.45</b> ‚Ä¢ 365d = <b>80.00</b></div>
      <div class="pill">Bloqueado 30d ‚âà <b>9.86</b> ‚Ä¢ 90d ‚âà <b>49.32</b> ‚Ä¢ 180d ‚âà <b>147.95</b></div>
      <p class="note" data-i="stake_fund">Las recompensas se pagan del <em>staking pool</em> (500M). Si se agota, los pagos se limitan a lo disponible. Los APR pueden ajustarse (tope 50%).</p>
    </div>
  </section>

  <!-- TRANSPARENCIA: CONTRATO EN P√ÅGINA -->
  <section class="card box" style="margin-top:8px">
    <h2>üîé <span data-i="src_title">C√≥digo del contrato (transparencia)</span></h2>
    <details>
      <summary data-i="src_hint">Ver/ocultar c√≥digo fuente</summary>
      <pre id="src">
/* Pegamos aqu√≠ tu contrato */
<span style="opacity:.75">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

/*
 * MoonWord (MoWo) - versi√≥n sin Pausable, con staking y permit
 * - Supply fijo: 1,000,000,000,000 MoWo (18 decimales)
 * - Pools: 30M juego + 500M staking (retenidos en el contrato)
 * - Staking flexible y bloqueado (30/90/180 d√≠as)
 * - Roles: ADMIN (DEFAULT_ADMIN_ROLE), GAME_ROLE, STAKING_ROLE
 * - Seguridad: ERC20, ERC20Permit, AccessControl, ReentrancyGuard
 * - Gas friendly: stake* usa transferFrom; variantes con permit para 1 sola tx
 */

import "https://raw.githubusercontent.com/OpenZeppelin/openzeppelin-contracts/v5.0.1/contracts/token/ERC20/ERC20.sol";
import "https://raw.githubusercontent.com/OpenZeppelin/openzeppelin-contracts/v5.0.1/contracts/token/ERC20/extensions/ERC20Permit.sol";
import "https://raw.githubusercontent.com/OpenZeppelin/openzeppelin-contracts/v5.0.1/contracts/access/AccessControl.sol";
import "https://raw.githubusercontent.com/OpenZeppelin/openzeppelin-contracts/v5.0.1/contracts/utils/ReentrancyGuard.sol";

contract MoonWordToken is ERC20, ERC20Permit, AccessControl, ReentrancyGuard {
    bytes32 public constant GAME_ROLE    = keccak256("GAME_ROLE");
    bytes32 public constant STAKING_ROLE = keccak256("STAKING_ROLE");

    uint256 public constant DECIMALS = 1e18;
    uint256 public constant TOTAL_SUPPLY = 1_000_000_000_000 * DECIMALS;
    uint256 public constant GAME_REWARDS_ALLOCATION    = 30_000_000 * DECIMALS;
    uint256 public constant STAKING_REWARDS_ALLOCATION = 500_000_000 * DECIMALS;

    uint256 public gamePoolRemaining;
    uint256 public stakingPoolRemaining;

    uint256 public flexibleAPR_BPS = 800;
    uint256 public lock30dAPR_BPS  = 1200;
    uint256 public lock90dAPR_BPS  = 2000;
    uint256 public lock180dAPR_BPS = 3000;
    uint256 public constant MAX_APR_BPS = 5000;

    uint256 public constant DAY = 1 days;
    uint256 public constant LOCK_30D  = 30 * DAY;
    uint256 public constant LOCK_90D  = 90 * DAY;
    uint256 public constant LOCK_180D = 180 * DAY;

    struct FlexiblePosition { uint256 amount; uint256 accrued; uint256 lastUpdate; }
    mapping(address => FlexiblePosition) public flexible;

    struct LockedStake { uint256 amount; uint256 start; uint256 duration; uint256 aprBps; bool claimed; }
    mapping(address => LockedStake[]) public lockedStakes;

    event GameRewardPaid(address indexed to, uint256 amount);
    event FlexibleStaked(address indexed user, uint256 amount);
    event FlexibleUnstaked(address indexed user, uint256 amount);
    event FlexibleClaimed(address indexed user, uint256 reward);
    event LockedStaked(address indexed user, uint256 amount, uint256 duration, uint256 aprBps, uint256 index);
    event LockedClaimed(address indexed user, uint256 index, uint256 principal, uint256 reward);
    event APRUpdated(uint256 flexibleAPR, uint256 apr30, uint256 apr90, uint256 apr180);

    constructor(address owner_) ERC20("MoonWord", "MoWo") ERC20Permit("MoonWord") {
        require(owner_ != address(0), "owner zero");
        uint256 pools = GAME_REWARDS_ALLOCATION + STAKING_REWARDS_ALLOCATION;
        _mint(address(this), pools);
        _mint(owner_, TOTAL_SUPPLY - pools);
        gamePoolRemaining    = GAME_REWARDS_ALLOCATION;
        stakingPoolRemaining = STAKING_REWARDS_ALLOCATION;
        _grantRole(DEFAULT_ADMIN_ROLE, owner_);
        _grantRole(GAME_ROLE, owner_);
        _grantRole(STAKING_ROLE, owner_);
    }

    function setAPRs(uint256 flexibleBps, uint256 apr30, uint256 apr90, uint256 apr180)
        external onlyRole(DEFAULT_ADMIN_ROLE)
    {
        require(flexibleBps<=MAX_APR_BPS && apr30<=MAX_APR_BPS && apr90<=MAX_APR_BPS && apr180<=MAX_APR_BPS, "APR too high");
        flexibleAPR_BPS = flexibleBps; lock30dAPR_BPS = apr30; lock90dAPR_BPS = apr90; lock180dAPR_BPS = apr180;
        emit APRUpdated(flexibleBps, apr30, apr90, apr180);
    }

    function _calcLinearReward(uint256 amount, uint256 aprBps, uint256 elapsedSeconds) internal pure returns (uint256){
        return (amount * aprBps * elapsedSeconds) / (10000 * 365 days);
    }

    function rewardPlayer(address to, uint256 amount) external nonReentrant onlyRole(GAME_ROLE){
        require(to!=address(0),"to zero"); require(amount>0,"zero amount"); require(amount<=gamePoolRemaining,"game pool depleted");
        gamePoolRemaining -= amount; _transfer(address(this), to, amount); emit GameRewardPaid(to, amount);
    }

    function _updateFlexible(address user) internal {
        FlexiblePosition storage p = flexible[user];
        if (p.amount > 0) {
            uint256 elapsed = block.timestamp - p.lastUpdate;
            if (elapsed > 0) { p.accrued += _calcLinearReward(p.amount, flexibleAPR_BPS, elapsed); }
        }
        p.lastUpdate = block.timestamp;
    }

    function stakeFlexible(uint256 amount) external nonReentrant {
        require(amount>0,"zero amount"); _updateFlexible(msg.sender);
        _spendAllowance(msg.sender, address(this), amount); _transfer(msg.sender, address(this), amount);
        flexible[msg.sender].amount += amount; emit FlexibleStaked(msg.sender, amount);
    }

    function stakeFlexibleWithPermit(uint256 amount,uint256 deadline,uint8 v, bytes32 r, bytes32 s) external nonReentrant {
        require(amount>0,"zero amount"); permit(msg.sender, address(this), amount, deadline, v, r, s);
        _updateFlexible(msg.sender); _spendAllowance(msg.sender, address(this), amount); _transfer(msg.sender, address(this), amount);
        flexible[msg.sender].amount += amount; emit FlexibleStaked(msg.sender, amount);
    }

    function unstakeFlexible(uint256 amount) external nonReentrant {
        require(amount>0,"zero amount"); _updateFlexible(msg.sender);
        FlexiblePosition storage p = flexible[msg.sender]; require(p.amount>=amount,"insufficient staked");
        p.amount -= amount; _transfer(address(this), msg.sender, amount); emit FlexibleUnstaked(msg.sender, amount);
    }

    function claimFlexible() external nonReentrant {
        _updateFlexible(msg.sender); FlexiblePosition storage p = flexible[msg.sender];
        uint256 reward = p.accrued; require(reward>0,"no rewards");
        uint256 pay = reward; if (pay > stakingPoolRemaining) pay = stakingPoolRemaining; require(pay>0,"staking pool empty");
        p.accrued -= pay; stakingPoolRemaining -= pay; _transfer(address(this), msg.sender, pay); emit FlexibleClaimed(msg.sender, pay);
    }

    function pendingFlexible(address user) external view returns (uint256){
        FlexiblePosition memory p = flexible[user]; if (p.amount==0) return p.accrued;
        uint256 elapsed = block.timestamp - p.lastUpdate; return p.accrued + _calcLinearReward(p.amount, flexibleAPR_BPS, elapsed);
    }

    function stakeLocked(uint256 amount, uint256 durationDays) external nonReentrant {
        require(amount>0,"zero amount");
        uint256 duration; uint256 apr;
        if (durationDays==30){duration=30 days; apr=lock30dAPR_BPS;}
        else if (durationDays==90){duration=90 days; apr=lock90dAPR_BPS;}
        else if (durationDays==180){duration=180 days; apr=lock180dAPR_BPS;}
        else { revert("invalid lock"); }
        _spendAllowance(msg.sender, address(this), amount); _transfer(msg.sender, address(this), amount);
        lockedStakes[msg.sender].push(LockedStake({amount:amount,start:block.timestamp,duration:duration,aprBps:apr,claimed:false}));
        emit LockedStaked(msg.sender, amount, duration, apr, lockedStakes[msg.sender].length - 1);
    }

    function stakeLockedWithPermit(uint256 amount,uint256 durationDays,uint256 deadline,uint8 v, bytes32 r, bytes32 s) external nonReentrant {
        require(amount>0,"zero amount");
        uint256 duration; uint256 apr;
        if (durationDays==30){duration=30 days; apr=lock30dAPR_BPS;}
        else if (durationDays==90){duration=90 days; apr=lock90dAPR_BPS;}
        else if (durationDays==180){duration=180 days; apr=lock180dAPR_BPS;}
        else { revert("invalid lock"); }
        permit(msg.sender, address(this), amount, deadline, v, r, s);
        _spendAllowance(msg.sender, address(this), amount); _transfer(msg.sender, address(this), amount);
        lockedStakes[msg.sender].push(LockedStake({amount:amount,start:block.timestamp,duration:duration,aprBps:apr,claimed:false}));
        emit LockedStaked(msg.sender, amount, duration, apr, lockedStakes[msg.sender].length - 1);
    }

    function _lockedEarned(LockedStake memory s) internal view returns (uint256){
        uint256 elapsed = block.timestamp > s.start ? (block.timestamp - s.start) : 0; if (elapsed > s.duration) elapsed = s.duration;
        return _calcLinearReward(s.amount, s.aprBps, elapsed);
    }

    function claimLocked(uint256 index) external nonReentrant {
        require(index < lockedStakes[msg.sender].length,"bad index");
        LockedStake storage s = lockedStakes[msg.sender][index]; require(!s.claimed,"already claimed"); require(block.timestamp >= s.start + s.duration,"still locked");
        uint256 reward = _lockedEarned(s); uint256 pay = reward; if (pay > stakingPoolRemaining) pay = stakingPoolRemaining;
        s.claimed = true; _transfer(address(this), msg.sender, s.amount);
        if (pay>0){ stakingPoolRemaining -= pay; _transfer(address(this), msg.sender, pay); }
        emit LockedClaimed(msg.sender, index, s.amount, pay);
    }

    function lockedStakeInfo(address user, uint256 index) external view returns (uint256,uint256,uint256,uint256,bool,uint256){
        require(index < lockedStakes[user].length,"bad index"); LockedStake memory s = lockedStakes[user][index];
        return (s.amount,s.start,s.duration,s.aprBps,s.claimed,_lockedEarned(s));
    }
    function lockedStakeCount(address user) external view returns (uint256){ return lockedStakes[user].length; }

    function movePoolToPool(bool fromGameToStaking, uint256 amount) external onlyRole(DEFAULT_ADMIN_ROLE) {
        require(amount>0,"zero");
        if (fromGameToStaking){ require(amount<=gamePoolRemaining,"exceeds game"); gamePoolRemaining-=amount; stakingPoolRemaining+=amount; }
        else { require(amount<=stakingPoolRemaining,"exceeds staking"); stakingPoolRemaining-=amount; gamePoolRemaining+=amount; }
    }

    function rescueForeignERC20(address token, address to, uint256 amount) external onlyRole(DEFAULT_ADMIN_ROLE){
        require(token!=address(this),"cannot rescue MoWo"); require(to!=address(0),"to zero");
        (bool ok, bytes memory data) = token.call(abi.encodeWithSignature("transfer(address,uint256)", to, amount));
        require(ok && (data.length==0 || abi.decode(data,(bool))), "transfer failed");
    }

    function supportsInterface(bytes4 interfaceId) public view override(AccessControl) returns (bool){
        return super.supportsInterface(interfaceId);
    }
}
</span>
      </pre>
    </details>
    <p class="note">Verifica el contrato en Polygonscan para detalles de compilaci√≥n y bytecode.</p>
  </section>

  <p class="note" style="text-align:center;margin:20px 0">
    ¬© <span id="y"></span> MoonWord ‚Ä¢ <span class="warn" data-i="verify_warn">Siempre verifica la direcci√≥n del contrato en Polygonscan.</span>
  </p>
</div>

<!-- Libs -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script src="https://unpkg.com/@walletconnect/ethereum-provider@2.11.1/dist/index.umd.min.js"></script>
<script src="https://global.transak.com/sdk/v1.1/widget.js"></script>

<script>
  // ===== Config =====
  const TOKEN_ADDRESS = '0xA6aa1812156fD392fE8B2cf4dBb95BB229990ab7';
  const POLYGON_HEX = '0x89';
  const presaleEnd = new Date(Date.now() + 120*24*60*60*1000); // 4 meses (cambia por fecha exacta si quieres)
  const WC_PROJECT_ID = 'REEMPLAZA_CON_TU_PROJECT_ID'; // WalletConnect
  // ===== A√±o =====
  document.getElementById('y').textContent = new Date().getFullYear();

  // ===== i18n (muy simple) =====
  const i18n = {
    es:{header_sub:"Token ERC-20 en Polygon ‚Ä¢ Staking flexible y bloqueado",
        hero_title:"Este token lo podr√°s utilizar en la Luna üåô",
        hero_desc:"Supply fijo de 1,000,000,000,000 MoWo. Sin mint futuro. Pools internos para <b>juego (30M)</b> y <b>staking (500M)</b>.",
        btn_scan:"Ver en Polygonscan", btn_uniswap:"Comprar en Uniswap", btn_add:"A√±adir a MetaMask", btn_connect:"Conectar wallet",
        ribbon:"Oferta limitada de preventa ‚Äî precio preferente hasta que termine el contador.",
        presale_until:"Preventa termina en: <strong id='countdown'>--d --:--:--</strong>",
        k_supply:"Suministro", k_chain:"Red", k_addr:"Contrato",
        ref_price:"Precio de referencia inicial", amm_note:"El precio real lo decide el AMM seg√∫n liquidez y operaciones.",
        buy_crypto:"Comprar con CRIPTO", buy_card:"Comprar con TARJETA", need_pol:"Necesitas POL para gas (Polygon).",
        tok_title:"Tokenomics", tok_total:"Supply total", tok_game:"Pool juego", tok_stake:"Pool staking",
        tok_nomint:"Sin airdrop autom√°tico, sin mint posterior.",
        tok_roles:"Roles seguros para recompensas de juego y ajustes de APR.",
        tok_modes:"Staking flexible (salida libre) y bloqueado (30/90/180 d√≠as).",
        game_note:"El total asignado al Game Pool se activar√° con el lanzamiento del nuevo juego Android ‚Äî experiencia in√©dita, sin env√≠os por ‚ÄúPlay‚Äù, 100% integrable con MoWo.",
        stake_title:"Explicaci√≥n de staking", stake_flex:"El contrato tiene <b>staking flexible</b> sin obligaci√≥n de bloquear. Puedes entrar/salir cuando quieras y reclamar recompensas acumuladas (<code>claimFlexible()</code>).",
        stake_examples:"Ejemplos con 1000 MoWo", stake_fund:"Las recompensas se pagan del <em>staking pool</em> (500M). Si se agota, se limitan a lo disponible. Los APR pueden ajustarse (tope 50%).",
        src_title:"C√≥digo del contrato (transparencia)", src_hint:"Ver/ocultar c√≥digo fuente",
        verify_warn:"Siempre verifica la direcci√≥n del contrato en Polygonscan."},
    en:{header_sub:"ERC-20 token on Polygon ‚Ä¢ Flexible and locked staking",
        hero_title:"You will be able to use this token on the Moon üåô",
        hero_desc:"Fixed supply of 1,000,000,000,000 MoWo. No future mint. Internal pools for <b>game (30M)</b> and <b>staking (500M)</b>.",
        btn_scan:"View on Polygonscan", btn_uniswap:"Buy on Uniswap", btn_add:"Add to MetaMask", btn_connect:"Connect wallet",
        ribbon:"Limited presale ‚Äî preferred price until the timer ends.",
        presale_until:"Presale ends in: <strong id='countdown'>--d --:--:--</strong>",
        k_supply:"Supply", k_chain:"Network", k_addr:"Contract",
        ref_price:"Reference starting price", amm_note:"Actual price is set by the AMM given liquidity & trades.",
        buy_crypto:"Buy with CRYPTO", buy_card:"Buy with CARD", need_pol:"You need POL for gas (Polygon).",
        tok_title:"Tokenomics", tok_total:"Total supply", tok_game:"Game pool", tok_stake:"Staking pool",
        tok_nomint:"No automatic airdrop, no future mint.",
        tok_roles:"Secure roles for game rewards and APR updates.",
        tok_modes:"Flexible staking (free exit) and locked (30/90/180 days).",
        game_note:"Game Pool allocation unlocks with the Android game launch ‚Äî new gameplay, outside traditional store constraints, MoWo integrated.",
        stake_title:"Staking explained", stake_flex:"The contract has <b>flexible staking</b> with no lock. Enter/exit anytime and claim accrued rewards (<code>claimFlexible()</code>).",
        stake_examples:"Examples with 1000 MoWo", stake_fund:"Rewards are paid from the 500M staking pool. If empty, payouts are limited. APRs adjustable (max 50%).",
        src_title:"Contract source (transparency)", src_hint:"Show/Hide source",
        verify_warn:"Always verify the contract address on Polygonscan."},
    ru:{header_sub:"–¢–æ–∫–µ–Ω ERC-20 –Ω–∞ Polygon ‚Ä¢ –ì–∏–±–∫–∏–π –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–µ–π–∫–∏–Ω–≥",
        hero_title:"–≠—Ç–æ—Ç —Ç–æ–∫–µ–Ω –≤—ã —Å–º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –õ—É–Ω–µ üåô",
        hero_desc:"–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä—ë–º 1,000,000,000,000 MoWo. –ë–µ–∑ –¥–æ–ø. –≤—ã–ø—É—Å–∫–∞. –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—É–ª—ã: <b>–∏–≥—Ä—ã (30M)</b> –∏ <b>—Å—Ç–µ–π–∫–∏–Ω–≥ (500M)</b>.",
        btn_scan:"–û—Ç–∫—Ä—ã—Ç—å –≤ Polygonscan", btn_uniswap:"–ö—É–ø–∏—Ç—å –Ω–∞ Uniswap", btn_add:"–î–æ–±–∞–≤–∏—Ç—å –≤ MetaMask", btn_connect:"–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫",
        ribbon:"–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø—Ä–µ–¥–ø—Ä–æ–¥–∞–∂–∞ ‚Äî –ª—å–≥–æ—Ç–Ω–∞—è —Ü–µ–Ω–∞ –¥–æ –∫–æ–Ω—Ü–∞ —Ç–∞–π–º–µ—Ä–∞.",
        presale_until:"–ü—Ä–µ–¥–ø—Ä–æ–¥–∞–∂–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑: <strong id='countdown'>--d --:--:--</strong>",
        k_supply:"–≠–º–∏—Å—Å–∏—è", k_chain:"–°–µ—Ç—å", k_addr:"–ö–æ–Ω—Ç—Ä–∞–∫—Ç",
        ref_price:"–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞", amm_note:"–§–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ü–µ–Ω—É –∑–∞–¥–∞—ë—Ç AMM –∏—Å—Ö–æ–¥—è –∏–∑ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –∏ —Å–¥–µ–ª–æ–∫.",
        buy_crypto:"–ö—É–ø–∏—Ç—å –∑–∞ CRYPTO", buy_card:"–ö—É–ø–∏—Ç—å –∫–∞—Ä—Ç–æ–π", need_pol:"–ù—É–∂–µ–Ω POL –¥–ª—è –≥–∞–∑–∞ (Polygon).",
        tok_title:"–¢–æ–∫–µ–Ω–æ–º–∏–∫–∞", tok_total:"–û–±—â–∏–π –æ–±—ä—ë–º", tok_game:"–ò–≥—Ä–æ–≤–æ–π –ø—É–ª", tok_stake:"–ü—É–ª —Å—Ç–µ–π–∫–∏–Ω–≥–∞",
        tok_nomint:"–ù–µ—Ç –∞–≤—Ç–æ–¥—Ä–æ–ø–∞ –∏ –¥–æ–ø. —ç–º–∏—Å—Å–∏–∏.",
        tok_roles:"–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ä–æ–ª–∏ –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –Ω–∞–≥—Ä–∞–¥ –∏ APR.",
        tok_modes:"–ì–∏–±–∫–∏–π —Å—Ç–µ–π–∫–∏–Ω–≥ (–±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏) –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (30/90/180 –¥–Ω–µ–π).",
        game_note:"–ò–≥—Ä–æ–≤–æ–π –ø—É–ª —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∑–∞–ø—É—Å–∫–æ–º Android-–∏–≥—Ä—ã.",
        stake_title:"–û —Å—Ç–µ–π–∫–∏–Ω–≥–µ", stake_flex:"–ì–∏–±–∫–∏–π —Å—Ç–µ–π–∫–∏–Ω–≥: –≤—Ö–æ–¥/–≤—ã—Ö–æ–¥ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è, –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è.",
        stake_examples:"–ü—Ä–∏–º–µ—Ä—ã –¥–ª—è 1000 MoWo", stake_fund:"–í—ã–ø–ª–∞—Ç—ã –∏–∑ –ø—É–ª–∞ 500M; –ø—Ä–∏ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ ‚Äî –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç—Å—è.",
        src_title:"–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞", src_hint:"–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫",
        verify_warn:"–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ Polygonscan."},
    ar:{header_sub:"ÿ±ŸÖÿ≤ ERC-20 ÿπŸÑŸâ ÿ¥ÿ®ŸÉÿ© ÿ®ŸàŸÑŸäÿ¨ŸàŸÜ ‚Ä¢ ÿ±ŸáŸÜ ŸÖÿ±ŸÜ ŸàŸÖŸÇŸÅŸÑ", hero_title:"ÿ≥ÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Ÿáÿ∞ÿß ÿßŸÑÿ±ŸÖÿ≤ ÿπŸÑŸâ ÿßŸÑŸÇŸÖÿ± üåô",
        hero_desc:"ŸÖÿπÿ±Ÿàÿ∂ ÿ´ÿßÿ®ÿ™ 1,000,000,000,000 MoWo. ÿ®ÿØŸàŸÜ ÿ≥ŸÉŸë ŸÑÿßÿ≠ŸÇ. ÿÆÿ≤ÿßŸÜÿßÿ™ ÿØÿßÿÆŸÑŸäÿ© ŸÑŸÄ <b>ÿßŸÑŸÑÿπÿ®ÿ© (30M)</b> Ÿà<b>ÿßŸÑÿ±ŸáŸÜ (500M)</b>.",
        btn_scan:"ÿπÿ±ÿ∂ ÿπŸÑŸâ Polygonscan", btn_uniswap:"ÿßŸÑÿ¥ÿ±ÿßÿ° ÿπÿ®ÿ± Uniswap", btn_add:"ÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ MetaMask", btn_connect:"ÿßÿ™ÿµÿßŸÑ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©",
        ribbon:"ÿ®Ÿäÿπ ŸÖÿ≥ÿ®ŸÇ ŸÖÿ≠ÿØŸàÿØ ‚Äî ÿ≥ÿπÿ± ŸÖŸÖŸäÿ≤ ÿ≠ÿ™Ÿâ ŸÜŸáÿßŸäÿ© ÿßŸÑŸÖÿ§ŸÇÿ™.",
        presale_until:"ŸäŸÜÿ™ŸáŸä ÿßŸÑÿ®Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ®ŸÇ ÿÆŸÑÿßŸÑ: <strong id='countdown'>--d --:--:--</strong>",
        k_supply:"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä", k_chain:"ÿßŸÑÿ¥ÿ®ŸÉÿ©", k_addr:"ÿßŸÑÿπŸÇÿØ",
        ref_price:"ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÖÿ±ÿ¨ÿπŸä", amm_note:"Ÿäÿ≠ÿØÿØ AMM ÿßŸÑÿ≥ÿπÿ± ÿ≠ÿ≥ÿ® ÿßŸÑÿ≥ŸäŸàŸÑÿ© ŸàÿßŸÑÿµŸÅŸÇÿßÿ™.",
        buy_crypto:"ÿ¥ÿ±ÿßÿ° ÿ®ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ŸÅÿ±ÿ©", buy_card:"ÿ¥ÿ±ÿßÿ° ÿ®ÿßŸÑÿ®ÿ∑ÿßŸÇÿ©", need_pol:"ÿ™ÿ≠ÿ™ÿßÿ¨ POL ŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ∫ÿßÿ≤ (Polygon).",
        tok_title:"ÿßŸÇÿ™ÿµÿßÿØ ÿßŸÑÿ±ŸÖÿ≤", tok_total:"ÿßŸÑÿ•ŸÖÿØÿßÿØ ÿßŸÑŸÉŸÑŸä", tok_game:"ÿÆÿ≤ÿßŸÜ ÿßŸÑŸÑÿπÿ®ÿ©", tok_stake:"ÿÆÿ≤ÿßŸÜ ÿßŸÑÿ±ŸáŸÜ",
        tok_nomint:"ŸÑÿß ŸäŸàÿ¨ÿØ ÿ•Ÿäÿ±ÿØÿ±Ÿàÿ® ÿ™ŸÑŸÇÿßÿ¶Ÿä ŸàŸÑÿß ÿ≥ŸÉ ŸÑÿßÿ≠ŸÇ.",
        tok_roles:"ÿ£ÿØŸàÿßÿ± ÿ¢ŸÖŸÜÿ© ŸÑŸÖŸÉÿßŸÅÿ¢ÿ™ ÿßŸÑŸÑÿπÿ®ÿ© Ÿàÿ™ÿπÿØŸäŸÑ ÿßŸÑÿπŸàÿßÿ¶ÿØ.",
        tok_modes:"ÿ±ŸáŸÜ ŸÖÿ±ŸÜ (ÿ®ÿØŸàŸÜ ÿ≠ÿ¨ÿ≤) ŸàŸÖŸÇŸÅŸÑ (30/90/180 ŸäŸàŸÖÿßŸã).",
        game_note:"ŸäŸÅÿ™ÿ≠ ÿÆÿ≤ÿßŸÜ ÿßŸÑŸÑÿπÿ®ÿ© ÿπŸÜÿØ ÿ•ÿ∑ŸÑÿßŸÇ ŸÑÿπÿ®ÿ© ÿ£ŸÜÿØÿ±ŸàŸäÿØ.",
        stake_title:"ÿ¥ÿ±ÿ≠ ÿßŸÑÿ±ŸáŸÜ", stake_flex:"ÿ±ŸáŸÜ ŸÖÿ±ŸÜ: ÿØÿÆŸàŸÑ/ÿÆÿ±Ÿàÿ¨ ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™ ŸÖÿπ ÿ≥ÿ≠ÿ® ÿßŸÑŸÖŸÉÿßŸÅÿ¢ÿ™ ÿßŸÑŸÖÿ™ÿ±ÿßŸÉŸÖÿ©.",
        stake_examples:"ÿ£ŸÖÿ´ŸÑÿ© ŸÑŸÄ 1000 MoWo", stake_fund:"ÿ™Ÿèÿµÿ±ŸÅ ÿßŸÑŸÖŸÉÿßŸÅÿ¢ÿ™ ŸÖŸÜ ÿÆÿ≤ÿßŸÜ 500M.",
        src_title:"ŸÉŸàÿØ ÿßŸÑÿπŸÇÿØ (ÿ¥ŸÅÿßŸÅŸäÿ©)", src_hint:"ÿ•ÿ∏Ÿáÿßÿ±/ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÉŸàÿØ",
        verify_warn:"ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿπŸÜŸàÿßŸÜ ÿßŸÑÿπŸÇÿØ ÿπŸÑŸâ Polygonscan."},
    de:{header_sub:"ERC-20-Token auf Polygon ‚Ä¢ Flexibles & gesperrtes Staking", hero_title:"Diesen Token kannst du auf dem Mond nutzen üåô",
        hero_desc:"Feste Menge 1.000.000.000.000 MoWo. Kein Mint. Interne Pools: <b>Game (30M)</b>, <b>Staking (500M)</b>.",
        btn_scan:"Auf Polygonscan ansehen", btn_uniswap:"Auf Uniswap kaufen", btn_add:"Zu MetaMask hinzuf√ºgen", btn_connect:"Wallet verbinden",
        ribbon:"Limitierte Presale-Phase ‚Äî Vorteilspreis bis zum Timerende.",
        presale_until:"Presale endet in: <strong id='countdown'>--d --:--:--</strong>",
        k_supply:"Angebot", k_chain:"Netzwerk", k_addr:"Vertrag",
        ref_price:"Referenzstartpreis", amm_note:"Der AMM bestimmt den Marktpreis.",
        buy_crypto:"Mit CRYPTO kaufen", buy_card:"Mit Karte kaufen", need_pol:"POL f√ºr Gas (Polygon) erforderlich.",
        tok_title:"Tokenomics", tok_total:"Gesamtangebot", tok_game:"Spielpool", tok_stake:"Staking-Pool",
        tok_nomint:"Kein Auto-Airdrop, kein sp√§teres Minting.",
        tok_roles:"Sichere Rollen f√ºr Spielbelohnungen & APR.",
        tok_modes:"Flex-Staking (ohne Lock) & Lock (30/90/180 Tage).",
        game_note:"Game-Pool wird mit dem Android-Game freigeschaltet.",
        stake_title:"Staking erkl√§rt", stake_flex:"Flex-Staking: jederzeit ein/aus, Rewards sammelbar.",
        stake_examples:"Beispiele mit 1000 MoWo", stake_fund:"Rewards aus dem 500M-Pool.",
        src_title:"Vertragscode (Transparenz)", src_hint:"Quellcode anzeigen/ausblenden",
        verify_warn:"Pr√ºfe die Vertragsadresse auf Polygonscan."},
    fr:{header_sub:"Token ERC-20 sur Polygon ‚Ä¢ Staking flexible et verrouill√©", hero_title:"Ce token sera utilisable sur la Lune üåô",
        hero_desc:"Offre fixe 1 000 000 000 000 MoWo. Pas de mint futur. Pools internes <b>jeu (30M)</b> et <b>staking (500M)</b>.",
        btn_scan:"Voir sur Polygonscan", btn_uniswap:"Acheter sur Uniswap", btn_add:"Ajouter √† MetaMask", btn_connect:"Connecter le wallet",
        ribbon:"Pr√©vente limit√©e ‚Äî prix pr√©f√©rentiel jusqu‚Äô√† la fin du compte √† rebours.",
        presale_until:"La pr√©vente se termine dans : <strong id='countdown'>--d --:--:--</strong>",
        k_supply:"Offre", k_chain:"R√©seau", k_addr:"Contrat",
        ref_price:"Prix de d√©part de r√©f√©rence", amm_note:"Le prix r√©el est fix√© par l‚ÄôAMM.",
        buy_crypto:"Acheter avec CRYPTO", buy_card:"Acheter par CARTE", need_pol:"POL requis pour le gas (Polygon).",
        tok_title:"Tokenomics", tok_total:"Offre totale", tok_game:"Pool jeu", tok_stake:"Pool staking",
        tok_nomint:"Pas d‚Äôairdrop automatique ni de mint futur.",
        tok_roles:"R√¥les s√©curis√©s pour les r√©compenses et l‚ÄôAPR.",
        tok_modes:"Staking flexible (sortie libre) et verrouill√© (30/90/180 j).",
        game_note:"Le Game Pool s‚Äôactive au lancement du jeu Android.",
        stake_title:"Staking expliqu√©", stake_flex:"Staking flexible sans blocage; claim des r√©compenses √† tout moment.",
        stake_examples:"Exemples avec 1000 MoWo", stake_fund:"R√©compenses pay√©es depuis le pool 500M.",
        src_title:"Code du contrat (transparence)", src_hint:"Afficher/Masquer le code",
        verify_warn:"Toujours v√©rifier l‚Äôadresse sur Polygonscan."},
    it:{header_sub:"Token ERC-20 su Polygon ‚Ä¢ Staking flessibile e bloccato", hero_title:"Potrai usare questo token sulla Luna üåô",
        hero_desc:"Supply fisso 1.000.000.000.000 MoWo. Nessun mint futuro. Pool interni <b>gioco (30M)</b> e <b>staking (500M)</b>.",
        btn_scan:"Vedi su Polygonscan", btn_uniswap:"Compra su Uniswap", btn_add:"Aggiungi a MetaMask", btn_connect:"Connetti wallet",
        ribbon:"Presale limitato ‚Äî prezzo preferenziale fino alla fine del timer.",
        presale_until:"La presale termina tra: <strong id='countdown'>--d --:--:--</strong>",
        k_supply:"Supply", k_chain:"Rete", k_addr:"Contratto",
        ref_price:"Prezzo di riferimento iniziale", amm_note:"Il prezzo reale lo decide l‚ÄôAMM.",
        buy_crypto:"Compra con CRYPTO", buy_card:"Compra con CARTA", need_pol:"Serve POL per il gas (Polygon).",
        tok_title:"Tokenomics", tok_total:"Supply totale", tok_game:"Pool gioco", tok_stake:"Pool staking",
        tok_nomint:"Nessun airdrop automatico n√© mint futuro.",
        tok_roles:"Ruoli sicuri per premi e APR.",
        tok_modes:"Staking flessibile e bloccato (30/90/180 gg).",
        game_note:"Il Game Pool si sblocca al lancio del gioco Android.",
        stake_title:"Staking: spiegazione", stake_flex:"Staking flessibile: entra/esci quando vuoi; claim dei reward.",
        stake_examples:"Esempi con 1000 MoWo", stake_fund:"Reward dal pool 500M.",
        src_title:"Codice del contratto", src_hint:"Mostra/Nascondi sorgente",
        verify_warn:"Verifica sempre l‚Äôindirizzo su Polygonscan."},
    zh:{header_sub:"Âü∫‰∫é Polygon ÁöÑ ERC-20 ‰ª£Â∏Å ‚Ä¢ ÁÅµÊ¥ª/ÈîÅ‰ªìË¥®Êäº", hero_title:"Ê≠§‰ª£Â∏ÅÂ∞ÜÂèØÂú®ÊúàÁêÉ‰∏ñÁïå‰∏≠‰ΩøÁî® üåô",
        hero_desc:"Âõ∫ÂÆöÊÄªÈáè 1,000,000,000,000 MoWo„ÄÇÊó†ÂêéÁª≠Â¢ûÂèë„ÄÇÂÜÖÁΩÆ <b>Ê∏∏ÊàèÊ±†Ôºà30MÔºâ</b> ‰∏é <b>Ë¥®ÊäºÊ±†Ôºà500MÔºâ</b>„ÄÇ",
        btn_scan:"Âú® Polygonscan Êü•Áúã", btn_uniswap:"Âú® Uniswap Ë¥≠‰π∞", btn_add:"Ê∑ªÂä†Âà∞ MetaMask", btn_connect:"ËøûÊé•Èí±ÂåÖ",
        ribbon:"ÈôêÊó∂È¢ÑÂîÆ ‚Äî ËÆ°Êó∂ÁªìÊùüÂâç‰∫´Âèó‰ºòÊÉ†‰ª∑Ê†º„ÄÇ",
        presale_until:"È¢ÑÂîÆÁªìÊùüÂÄíËÆ°Êó∂Ôºö<strong id='countdown'>--d --:--:--</strong>",
        k_supply:"ÊÄªÈáè", k_chain:"ÁΩëÁªú", k_addr:"ÂêàÁ∫¶",
        ref_price:"ÂèÇËÄÉÂàùÂßã‰ª∑Ê†º", amm_note:"ÂÆûÈôÖ‰ª∑Ê†ºÁî± AMM ÂÜ≥ÂÆöÔºàÊµÅÂä®ÊÄß‰∏é‰∫§ÊòìÔºâ„ÄÇ",
        buy_crypto:"Áî®Âä†ÂØÜË¥ßÂ∏ÅË¥≠‰π∞", buy_card:"Áî®Èì∂Ë°åÂç°Ë¥≠‰π∞", need_pol:"ÈúÄË¶Å POL ‰Ωú‰∏∫ GasÔºàPolygonÔºâ„ÄÇ",
        tok_title:"‰ª£Â∏ÅÁªèÊµé", tok_total:"ÊÄª‰ª£Â∏ÅÈáè", tok_game:"Ê∏∏ÊàèÊ±†", tok_stake:"Ë¥®ÊäºÊ±†",
        tok_nomint:"Êó†Ëá™Âä®Á©∫ÊäïÔºåÊó†ÂÜçÊ¨°Â¢ûÂèë„ÄÇ",
        tok_roles:"Ê∏∏ÊàèÂ•ñÂä±‰∏éÂπ¥ÂåñÂèØË∞ÉÁöÑÂÆâÂÖ®ËßíËâ≤„ÄÇ",
        tok_modes:"ÁÅµÊ¥ªË¥®ÊäºÔºàÈöèËøõÈöèÂá∫Ôºâ‰∏éÈîÅ‰ªìÔºà30/90/180 Â§©Ôºâ„ÄÇ",
        game_note:"Ê∏∏ÊàèÊ±†Â∞ÜÈöè Android Ê∏∏Êàè‰∏äÁ∫øÂêØÁî®„ÄÇ",
        stake_title:"Ë¥®ÊäºËØ¥Êòé", stake_flex:"ÁÅµÊ¥ªË¥®ÊäºÔºöÂèØÈöèÊó∂ËøõÂá∫Âπ∂È¢ÜÂèñÁ¥ØËÆ°Â•ñÂä±„ÄÇ",
        stake_examples:"1000 MoWo Á§∫‰æã", stake_fund:"Â•ñÂä±Êù•Ëá™ 5 ‰∫øË¥®ÊäºÊ±†ÔºåËÄóÂ∞ΩÂàôÂèóÈôê„ÄÇ",
        src_title:"ÂêàÁ∫¶Ê∫êÁ†ÅÔºàÈÄèÊòéÔºâ", src_hint:"Â±ïÂºÄ/ÊäòÂè†Ê∫êÁ†Å",
        verify_warn:"Âä°ÂøÖÂú® Polygonscan Ê†∏ÂØπÂêàÁ∫¶Âú∞ÂùÄ„ÄÇ"}
  };

  const sel = document.getElementById('langSel');
  const dirMap = { ar:'rtl' };
  function applyLang(l){
    const dict = i18n[l] || i18n.es;
    document.documentElement.lang = l;
    document.documentElement.dir = dirMap[l] || 'ltr';
    document.querySelectorAll('[data-i]').forEach(el=>{
      const key = el.getAttribute('data-i');
      if (dict[key]) el.innerHTML = dict[key];
    });
  }
  sel.addEventListener('change', e=>applyLang(e.target.value));
  applyLang('es');

  // ===== CountDown =====
  const cdEl = document.getElementById('countdown');
  function tick(){
    const now = Date.now();
    let s = Math.max(0, Math.floor((presaleEnd.getTime()-now)/1000));
    const d = Math.floor(s/86400); s%=86400;
    const h = String(Math.floor(s/3600)).padStart(2,'0'); s%=3600;
    const m = String(Math.floor(s/60)).padStart(2,'0');
    const sec = String(s%60).padStart(2,'0');
    cdEl.textContent = `${d}d ${h}:${m}:${sec}`;
  }
  tick(); setInterval(tick,1000);

  // ===== Add to MetaMask =====
  document.getElementById('addMetaMask').addEventListener('click', async ()=>{
    if (!window.ethereum) return alert('Instala MetaMask para continuar.');
    try{
      await window.ethereum.request({
        method:'wallet_watchAsset',
        params:{ type:'ERC20', options:{
          address:TOKEN_ADDRESS, symbol:'MoWo', decimals:18,
          image:'https://raw.githubusercontent.com/MaxStudiotoken/MoonWorld/main/logo.png'
        }}
      });
    }catch(e){ console.error(e); alert('No se pudo a√±adir el token.'); }
  });

  // ===== Wallet Connect =====
  const connectBtn = document.getElementById('connectWallet');
  const walletInfo = document.getElementById('walletInfo');
  function short(a){ return a ? `${a.slice(0,6)}...${a.slice(-4)}` : ''; }

  async function ensurePolygon(provider){
    try{
      await provider.request({ method:'wallet_switchEthereumChain', params:[{ chainId: POLYGON_HEX }] });
    }catch(e){
      if (e.code===4902){
        await provider.request({ method:'wallet_addEthereumChain', params:[{
          chainId: POLYGON_HEX, chainName:'Polygon Mainnet',
          nativeCurrency:{ name:'POL', symbol:'POL', decimals:18 },
          rpcUrls:['https://polygon-rpc.com'], blockExplorerUrls:['https://polygonscan.com']
        }]});
      } else { throw e; }
    }
  }

  async function connectInjected(){
    if (!window.ethereum) { alert('Instala MetaMask o usa un navegador con wallet.'); return null; }
    await ensurePolygon(window.ethereum);
    const acc = await window.ethereum.request({ method:'eth_requestAccounts' });
    return { provider: window.ethereum, account: acc[0] };
  }

  async function connectWalletConnect(){
    const WC = window.WalletConnectEthereumProvider;
    if (!WC){ alert('No se pudo cargar WalletConnect'); return null; }
    const wcProv = await WC.default.init({ projectId: WC_PROJECT_ID, chains:[137], showQrModal:true, rpcMap:{137:'https://polygon-rpc.com'} });
    const acc = await wcProv.enable();
    return { provider: wcProv, account: acc[0] };
  }

  async function chooseAndConnect(){
    const choice = await new Promise(res=>{
      const modal = document.createElement('div');
      modal.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:9999';
      modal.innerHTML = `
        <div class="card" style="padding:16px;min-width:300px">
          <h3 style="margin:0 0 10px">Conectar wallet</h3>
          <button id="optInjected" class="btn" style="width:100%;margin-bottom:8px">ü¶ä MetaMask / Trust (navegador)</button>
          <button id="optWC" class="btn" style="width:100%">üîó WalletConnect (QR)</button>
          <p class="note" style="margin-top:10px">Red: Polygon</p>
        </div>`;
      document.body.appendChild(modal);
      modal.querySelector('#optInjected').onclick=()=>{document.body.removeChild(modal); res('injected');}
      modal.querySelector('#optWC').onclick=()=>{document.body.removeChild(modal); res('wc');}
    });
    try{
      const session = choice==='injected' ? await connectInjected() : await connectWalletConnect();
      if (!session) return;
      walletInfo.textContent = `‚úÖ ${short(session.account)} ¬∑ Polygon`;
      connectBtn.innerHTML = `‚úÖ ${short(session.account)}`;
      window.mowoProvider = new ethers.providers.Web3Provider(session.provider,'any');
      window.mowoSigner = mowoProvider.getSigner();
    }catch(e){ console.error(e); alert('No se pudo conectar la wallet.'); }
  }
  connectBtn.addEventListener('click', chooseAndConnect);

  // ===== Buy with Card (Transak) =====
  document.getElementById('buyCard').addEventListener('click', async ()=>{
    let addr = '';
    try{ if (window.mowoSigner) addr = await window.mowoSigner.getAddress(); }catch(e){}
    const t = new TransakSDK({
      apiKey: 'TU_API_KEY_DE_TRANSAK', // <- pon tu API key
      environment: 'PRODUCTION',
      defaultCryptoCurrency: 'POL',
      network: 'polygon',
      walletAddress: addr || ''
    });
    t.init();
  });
</script>
</body>
</html>
